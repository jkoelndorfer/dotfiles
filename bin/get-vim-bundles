#!/bin/sh

vim_dir="$1"
if [ -z "$vim_dir" ]; then
	echo "You must specify the path to the vim directory" 1>&2
	exit 1
fi
BUNDLE_DIR="$vim_dir/bundle"
BUNDLE_FILE="$(readlink -f "$vim_dir/bundles")"

test -d "$BUNDLE_DIR" || mkdir -p "$BUNDLE_DIR"
cd "$BUNDLE_DIR"
while read repo; do
	repoDir="$(basename "$repo" '.git')"
	if [[ -d "$repoDir" ]]; then
		(cd "$repoDir"; git pull)
	else
		git clone "$repo"
	fi
done < "$BUNDLE_FILE"
