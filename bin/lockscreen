#!/bin/zsh

source "$DOTFILE_DIR/colors/solarized-dark"
declare -a wallpaper_args
if [[ -n "$WALLPAPER_BLURRED" ]]; then
    wallpaper_args=('-i' "$WALLPAPER_BLURRED")
else
    wallpaper_args=()
fi
# Sending SIGUSR1 to dunst will prevent it from displaying notifications.
# SIGUSR2 resumes notifications again.
#
# Suspending notifications is handy when the screen is locked!
pkill -SIGUSR1 dunst
{
    xset +dpms
    sleep 30
    if pgrep -s 0 i3lock; then
        xset dpms force off
    fi
} &
i3lock -n "${wallpaper_args[@]}" -c "$(echo "$SOLARIZED_BASE03" | sed -e 's/^#//')"
pkill -SIGUSR2 dunst
