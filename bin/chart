#!/usr/bin/env zsh

# bash on OS X is still version 3.2, which doesn't support associative arrays. So I use
# zsh instead. How is Apple so consistently terrible?

art_to_copy="$1"

typeset -A arts
arts[lenny_face]='( ͡° ͜ʖ ͡° )'
arts[shrug]='¯\\_(ツ)_/¯'
arts[puts_on_sunglasses]="(•_•)\n( •_•)>⌐■-■\n(⌐■_■)"
arts[flipping_tables]='(╯°□°）╯︵ ┻━┻)'
arts[resetting_table]='┬─┬ノ( º _ ºノ)'
arts[look_of_disapproval]='(ಠ_ಠ)'
arts[myth_busted]='/:€'
arts[why]='щ（ﾟДﾟщ）'

function display_arts() {
    for k v in ${(kv)arts}; do
        art_display_val=$(echo "$v" | tr "\n" " ")
        echo "${k}\t${art_display_val}"
    done | column -s "$(echo -e '\t')" -t
}

if [[ "$(basename "$0")" == 'xchart' ]]; then
    presentation_tool=("$DOTFILE_DIR/bin/rofi" -dmenu -p "copy to clipboard")
else
    presentation_tool='fzf'
fi

selected_art=$(display_arts | $presentation_tool | awk '{ print $1 }')
if [[ -z "$selected_art" ]]; then
    echo "$0: No art selected" >&2
    exit 1
fi
echo -n "${arts[$selected_art]}" | "$DOTFILE_DIR/bin/copy-to-clipboard"
